GAMS 39.1.0  5f04cd76 May 3, 2022           WEX-WEI x86 64bit/MS Windows - 05/12/22 18:39:30 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


       
         Multi-dimensional ranking
       
         Ranks
               x(i) => rank(i)
         or    x(i,j) => rank(i,j)
       
         See https://www.delftstack.com/howto/numpy/python-numpy-rank/
         for argsort(argsort) trick
       
  13   
  15   
  16  set
  17    i /i1*i10/
  18  ;
  19   
  20  alias(i,a,b,c);
  21   
  22  parameters
  23    p(a,b,c), Rank(a,b,c)
  24  ;
  25  p(a,b,c) = normal(0,1);
  26   
  27  embeddedCode Python:
  28  import gamstransfer as gt
  29  import numpy as np
  30   
  31  def rank(paramname: str,rankname: str):
  32   
  33     print("\n### calculating rank")
  34   
  35     # read GAMS data
  36     c = gt.Container()
  37     c.read(gams.db)
  38     p = c.data[paramname].toDense()
  39     shape = p.shape
  40     print(f"shape = {shape}")
  41   
  42     # ranking
  43     rnk = np.argsort(np.argsort(p,axis=None))+1
  44     rnk = np.reshape(rnk,shape)
  45     print(rnk)
  46   
  47     # pass results back to GAMS
  48     c.data[rankname].setRecords(rnk)
  49     c.write(gams.db, [rankname])
  50   
  51  rank("p","Rank") # case sentitive!!!
  52   
  53  endEmbeddedCode rank
  54   
  55  option rank:0;
  56  display$(card(p)<=1000) p, rank;
  57   
  58   
  59   


COMPILATION TIME     =        0.000 SECONDS      3 MB  39.1.0 5f04cd76 WEX-WEI
GAMS 39.1.0  5f04cd76 May 3, 2022           WEX-WEI x86 64bit/MS Windows - 05/12/22 18:39:30 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


----     56 PARAMETER p  

                 i1          i2          i3          i4          i5          i6          i7          i8          i9         i10

i1 .i1       -0.313       0.328       0.464      -1.830      -0.732      -0.972      -0.394       0.935      -0.759 3.695204E-4
i1 .i2       -0.909       0.344      -0.662      -0.486       1.884      -0.721      -1.299      -1.375       0.320       1.187
i1 .i3       -1.153       0.710       1.017      -0.724      -0.999       0.006      -0.995      -0.907       0.663       1.571
i1 .i4        2.213      -0.625      -0.218      -0.962      -0.108      -0.263      -0.527      -1.037       1.982       0.826
i1 .i5        1.004      -0.752       0.756       1.200       0.844      -1.431       2.099       0.673       0.169       1.649
i1 .i6        1.268       1.805      -1.248      -1.594      -0.812      -0.802      -0.543       1.283      -0.381      -0.714
i1 .i7        0.071      -0.123      -1.761      -0.001      -0.315      -0.295      -1.133      -1.224      -0.056       0.147
i1 .i8       -0.605       1.294      -0.194       0.778      -0.567       0.351      -0.633       0.109      -2.482       0.499
i1 .i9        0.602      -1.281      -0.707      -1.524      -0.224      -1.057      -1.399      -1.540      -0.915      -0.596
i1 .i10      -0.717      -0.166      -0.829      -0.242      -0.582      -1.018      -0.919       0.229       0.015      -0.613
i2 .i1        1.490       1.658      -1.730       1.184       2.020       0.074      -0.974       0.448       0.068      -1.064
i2 .i2        0.696       1.097      -0.626      -0.934      -1.267       0.731       0.216      -0.382      -1.147      -0.216
i2 .i3       -0.945       0.581       0.456      -0.599      -0.881       1.557       1.073       0.350       0.115      -1.065
i2 .i4        0.329      -0.543      -0.057       1.448      -0.754       3.182      -0.263       0.024      -0.044       0.424
i2 .i5       -0.387      -0.411       1.140       0.345       0.382      -0.139       0.592      -1.512       0.410      -1.006
i2 .i6       -0.854      -2.278       1.379       0.185      -2.090       1.106       0.556      -0.194       0.799      -1.849
i2 .i7        0.287      -1.193       1.256      -1.364       1.715       0.974       0.764       0.014      -1.912      -0.032
i2 .i8        0.221       1.655       1.403       0.839       1.015       0.347       1.063       1.061       1.289       0.489
i2 .i9       -0.676      -0.022      -0.266       0.118      -0.662      -0.595       0.964       0.839       0.438       0.432
i2 .i10       0.446      -0.356      -0.051      -0.547      -1.878      -0.638      -0.404      -0.799       1.282      -0.343
i3 .i1       -1.142      -0.110      -0.308       0.561      -0.677      -0.133      -2.085      -0.417       1.341       1.349
i3 .i2       -0.291      -0.714       0.172      -0.120       0.820      -0.094      -0.749      -0.230      -1.549      -1.746
i3 .i3       -0.469       0.303      -0.155      -1.794       0.126       0.314       0.957      -0.279       0.016       1.283
i3 .i4        0.184      -0.754       1.525       1.827       0.479      -0.889      -1.125      -1.231       0.329      -2.247
i3 .i5       -0.920       0.507       0.193       2.734       1.145       0.957       0.482      -0.791       1.095       1.597
i3 .i6       -1.157      -0.517       0.758       1.415      -0.287      -1.144       0.221      -1.316      -0.259      -0.550
i3 .i7       -0.882      -1.908      -0.962       0.216      -1.326      -2.134      -1.510       0.232       1.106      -1.456
i3 .i8       -0.055      -0.132       0.645      -0.540      -0.758      -1.663      -0.444       1.742       0.256      -1.014
i3 .i9       -0.895      -0.487       0.506      -1.625      -0.047       0.019       1.227      -1.180       0.542      -0.674
i3 .i10       1.203       1.141       1.281       0.059      -1.737       0.444      -0.147      -0.731       1.053      -0.576
i4 .i1       -0.814       0.141       0.883       0.133      -0.225       1.802       0.034       1.010       0.388      -0.514
i4 .i2       -1.137       0.882      -0.055       0.510      -1.974      -0.491       0.245       0.963      -1.083       0.439
i4 .i3        1.474       0.377      -1.683      -0.507      -1.748       0.946       2.291       1.337       0.059       0.361
i4 .i4       -0.756       1.114      -1.160      -0.832      -0.499      -0.570       0.928      -0.922       1.370       0.622
i4 .i5       -0.880       1.013      -0.279      -0.041      -0.949       1.375      -2.199       1.301      -1.013       1.305
i4 .i6        0.747      -0.053      -1.491       0.056      -0.180       0.583      -0.765       0.007      -0.467      -1.281
i4 .i7        0.814       2.455      -0.778      -1.247       2.007       1.999      -0.568      -0.157       0.288      -0.073
i4 .i8       -1.215      -0.098      -0.453      -1.297       0.001      -0.133       0.080       1.255      -0.818      -0.994
i4 .i9       -0.973      -1.994       0.098      -0.778       0.555       0.507       1.616      -1.096      -0.247       1.040
i4 .i10       0.391       0.060      -1.905      -0.460      -1.854      -1.152       0.068       1.738       1.222      -0.322
i5 .i1        0.710      -0.177      -0.520       1.825       1.820       0.737      -1.171       0.374       0.599       1.587
i5 .i2       -0.418      -0.590       0.959      -0.140      -2.335       2.005      -0.549      -0.534       0.557       1.150
i5 .i3        0.074       0.403      -0.163      -2.330       0.422       0.413       1.564       1.156      -0.134      -0.244
i5 .i4       -0.180      -1.255       0.219       1.097      -0.320      -0.100      -2.112      -0.176      -0.305       0.497
i5 .i5        1.004       0.387       0.046       1.579       1.192       0.301       2.063       1.558       0.066       0.302
i5 .i6        0.089       0.720      -0.366       1.292      -0.044      -0.265      -0.759       0.179       0.982       2.101
i5 .i7        0.165      -0.133      -0.261      -1.209       0.735       0.336      -0.920      -0.532       0.222      -0.404
i5 .i8       -0.713       1.955      -0.171      -2.001       1.067      -0.126      -0.115      -1.051      -0.363      -0.243
i5 .i9       -0.360       0.840       0.348       0.326      -0.041       0.867      -0.383       0.922      -0.630      -1.134
i5 .i10       0.627      -0.205      -0.323      -1.703      -0.349      -0.660      -0.192       0.790      -0.271      -0.434
i6 .i1       -1.038      -0.334       1.172      -0.357      -0.071       0.404      -1.294      -0.696       0.671      -1.324
i6 .i2       -0.868      -0.205      -0.069      -1.165       0.026       1.020      -0.685       0.011       0.389       0.656
i6 .i3       -0.818       1.036       1.212      -0.112       1.516      -1.193      -0.751      -1.307      -1.635      -0.330
i6 .i4        0.431      -0.159       0.195       0.352      -0.634      -1.093      -0.811       0.484      -1.384       0.854
i6 .i5        0.086       0.499       0.405       2.575       0.064      -0.449       0.414       0.083      -0.695       0.070
i6 .i6       -1.020      -0.218       0.629       0.357      -0.555       0.149       0.928      -0.620       0.100       0.042
i6 .i7        1.535       1.355       0.073      -1.145       1.127      -1.079      -0.695       1.258      -0.701       0.418
i6 .i8        0.516      -0.065      -1.658      -0.393      -1.279      -1.648       0.335       0.995       0.243       0.382
i6 .i9       -0.106      -0.737       0.588       0.104      -0.454      -0.090      -0.689       0.050      -1.273       0.701
i6 .i10      -0.590       0.884      -1.365       0.003       0.419       0.174      -0.201       0.238      -1.207      -0.249
i7 .i1        0.757       1.273       0.245       1.965       0.406       0.777       0.648      -0.619       0.159       0.748
i7 .i2        0.097      -0.437       0.846       0.134      -1.592      -0.999      -0.707      -0.990       0.318      -0.343
i7 .i3        0.318      -0.528      -0.198      -2.251      -0.049       0.462      -0.921      -0.048       1.678      -0.505
i7 .i4        1.260      -0.418      -0.303      -0.275       2.440      -1.695       0.466       0.254      -0.950      -0.491
i7 .i5        1.769       1.686       0.073      -0.272      -1.746       0.726       1.001       0.579       1.235      -0.846
i7 .i6       -0.192       0.279       0.927      -0.517       0.081       0.303       0.507      -0.082       1.053      -1.372
i7 .i7        1.493       1.669       0.121       0.414       0.640       1.468       0.976      -0.414       0.281       0.785
i7 .i8       -0.731      -1.482       0.193      -0.063      -0.132       0.642       0.219       0.849      -0.728      -0.939
i7 .i9        2.729       0.346       0.727      -1.970      -0.503       1.366      -0.252      -0.074       1.624      -0.159
i7 .i10      -0.604      -1.061      -0.871      -0.109      -0.161       1.354      -0.066       0.596      -0.974      -0.241
i8 .i1        0.652       0.343       1.042       0.153      -0.874      -0.861      -0.368      -0.921       1.027      -0.582
i8 .i2       -0.025      -0.174      -1.158       0.675      -0.400      -0.695      -0.315      -1.148       0.984      -0.333
i8 .i3        0.549      -0.325       1.431      -0.398      -0.435      -1.555      -0.181      -0.658       1.054       0.992
i8 .i4       -1.146      -0.906       0.958       0.215      -0.077       0.309       0.134       0.354       1.728      -0.447
i8 .i5        1.040      -0.083      -0.622      -2.212       0.755       0.486       0.349      -0.102       1.148      -0.717
i8 .i6        0.130      -1.119      -0.235      -0.531       0.751      -0.010       1.097       1.175       0.301      -0.672
i8 .i7       -0.581       0.537       0.587       0.399      -0.477       1.273       0.624       1.348       0.885       1.804
i8 .i8       -0.807       0.129      -0.633      -1.915      -0.357      -0.796       2.278       0.656      -1.042      -0.315
i8 .i9       -0.621       0.740       0.598       1.868       1.067       0.257       0.228      -1.495       1.155       0.857
i8 .i10       0.049      -2.815       0.172      -0.954       0.319       0.013       0.490       0.811       0.329      -0.801
i9 .i1       -0.220      -0.406       0.031      -1.582      -0.426       0.866       1.054      -0.650      -1.482       0.108
i9 .i2       -0.806      -1.230      -1.324      -0.733      -0.355       1.127      -0.101       0.770      -0.047       0.920
i9 .i3        0.020       0.867      -0.323      -0.374       1.157      -0.753       0.104       1.091      -0.673      -2.097
i9 .i4       -0.756       0.332      -0.379       0.876      -1.171      -2.361       1.209       0.908      -0.900       0.059
i9 .i5        0.106       2.225       0.205       0.319      -1.269       0.058      -0.423      -0.046       0.014       2.015
i9 .i6        0.265       0.331      -0.254       0.481      -0.138       1.053       0.296       0.577      -0.365      -0.030
i9 .i7        0.829       1.447      -1.430      -1.311      -1.154      -0.591      -0.204       2.219      -0.767      -0.060
i9 .i8        2.431      -1.398       0.191      -1.296      -2.384       0.261       0.503       0.113      -0.448       1.886
i9 .i9        0.262      -0.519      -0.264      -1.042       1.538       0.608      -0.207      -0.619       0.601       1.269
i9 .i10      -0.337       1.305       1.080       1.642       1.142       0.571      -0.484       0.333       0.439       1.085
i10.i1       -0.472       0.320      -0.201       0.340      -1.134       0.994      -1.496      -0.730      -0.180      -0.126
i10.i2        0.248       0.247       1.650       0.151      -1.445       0.791       0.484       0.076      -1.669      -1.018
i10.i3        0.109      -1.510       1.353      -0.983      -0.087       0.201      -0.145       1.403      -0.238      -0.604
i10.i4       -0.531       0.377      -0.886      -0.119       1.436      -0.183      -1.361      -1.133       0.461      -0.986
i10.i5        1.232       0.406      -1.903       0.011      -0.061       1.499       1.606       1.400       1.113       0.565
i10.i6       -0.967       2.302      -0.114      -1.662      -0.068       1.380       0.018       0.451      -0.949      -0.072
i10.i7       -0.972      -1.072      -2.835       0.112      -1.392       0.245       0.969       0.201       0.226      -0.303
i10.i8        0.194      -0.531       1.395       0.767      -0.107      -0.368       1.466       0.732      -1.551      -0.295
i10.i9       -0.021      -0.040      -0.229       1.763      -1.515      -0.627       0.896      -0.115      -2.185       0.081
i10.i10      -0.141      -0.596       0.568      -0.839       1.678      -1.342      -0.597       0.350       0.194      -0.383


----     56 PARAMETER Rank  

                 i1          i2          i3          i4          i5          i6          i7          i8          i9         i10

i1 .i1          378         647         706          31         227         160         344         820         214         514
i1 .i2          179         658         254         316         975         233          86          74         644         884
i1 .i3          115         767         842         232         150         517         152         180         760         946
i1 .i4          988         265         414         163         467         396         303         143         979         795
i1 .i5          838         222         780         886         800          68         986         762         587         954
i1 .i6          898         970          97          49         201         205         294         904         350         237
i1 .i7          548         458          33         513         375         384         127         101         492         581
i1 .i8          272         908         424         787         289         666         261         567           3         718
i1 .i9          747          91         240          56         412         138          70          55         178         278
i1 .i10         235         437         197         405         284         145         177         613         524         271
i2 .i1          936         957          38         883         984         552         158         701         545         136
i2 .i2          764         865         264         171          95         771         605         349         118         416
i2 .i3          169         738         703         275         187         943         858         664         571         135
i2 .i4          648         295         491         932         220        1000         395         529         503         693
i2 .i5          346         338         872         659         675         448         742          58         686         149
i2 .i6          193           8         922         593          17         866         730         425         791          30
i2 .i7          630         106         895          77         962         829         783         522          24         507
i2 .i8          609         956         927         797         841         661         855         854         906         714
i2 .i9          249         510         392         572         253         279         827         798         696         695
i2 .i10         700         361         496         293          28         258         340         207         903         364
i3 .i1          122         465         379         732         248         452          18         336         913         915
i3 .i2          385         236         588         459         794         474         224         409          54          36
i3 .i3          320         637         443          32         574         639         823         388         525         905
i3 .i4          592         219         940         973         708         184         128          99         650          10
i3 .i5          175         722         596         999         875         822         710         209         862         949
i3 .i6          113         307         782         928         386         121         608          83         398         291
i3 .i7          186          25         164         604          80          14          60         614         867          66
i3 .i8          494         455         755         296         216          43         328         965         623         147
i3 .i9          183         315         720          48         499         527         891         107         727         250
i3 .i10         887         873         902         539          37         699         444         229         851         286
i4 .i1          200         580         810         577         411         968         532         839         677         308
i4 .i2          123         809         493         724          21         314         617         826         132         698
i4 .i3          935         672          41         309          34         821         992         912         541         670
i4 .i4          217         869         111         196         312         287         818         172         920         749
i4 .i5          188         840         387         504         168         921          12         909         148         911
i4 .i6          776         495          63         537         432         739         213         518         321          90
i4 .i7          793         996         211          98         982         980         288         442         631         481
i4 .i8          102         473         324          87         515         451         554         894         198         153
i4 .i9          159          20         561         210         729         723         951         130         402         846
i4 .i10         679         542          26         322          29         116         546         964         890         373
i5 .i1          766         433         304         972         971         774         109         671         745         948
i5 .i2          334         282         825         447           6         981         292         297         731         877
i5 .i3          551         681         438           7         692         687         945         879         450         403
i5 .i4          431          96         607         863         374         472          15         434         380         716
i5 .i5          837         676         534         947         885         634         985         944         544         635
i5 .i6          559         768         355         907         502         393         215         591         831         987
i5 .i7          586         453         397         103         773         655         176         298         610         341
i5 .i8          238         977         436          19         856         456         461         139         357         404
i5 .i9          358         799         662         646         505         806         348         816         262         125
i5 .i10         751         418         371          39         363         255         426         789         391         331
i6 .i1          142         367         881         360         483         682          89         242         761          81
i6 .i2          191         419         484         110         530         843         247         520         678         758
i6 .i3          199         845         889         464         939         105         223          85          47         369
i6 .i4          694         440         599         667         259         131         202         712          73         803
i6 .i5          558         717         683         997         543         325         689         557         243         547
i6 .i6          144         415         752         669         290         582         819         268         562         533
i6 .i7          941         918         550         120         870         133         244         896         241         690
i6 .i8          725         487          45         345          92          46         654         835         616         674
i6 .i9          469         225         741         563         323         475         246         536          93         765
i6 .i10         281         811          76         516         691         590         421         615         104         401
i7 .i1          781         901         618         978         685         786         756         269         585         777
i7 .i2          560         329         801         578          50         151         239         154         640         365
i7 .i3          641         302         423           9         497         705         174         498         960         310
i7 .i4          897         335         382         389         995          40         707         622         166         313
i7 .i5          967         961         549         390          35         769         836         737         893         194
i7 .i6          427         628         817         306         556         636         721         478         850          75
i7 .i7          937         958         573         688         753         934         830         337         629         788
i7 .i8          228          65         595         488         454         754         606         802         231         170
i7 .i9          998         660         770          22         311         919         400         480         952         441
i7 .i10         274         137         190         466         439         917         486         743         157         406
i8 .i1          757         657         848         584         189         192         353         173         844         283
i8 .i2          509         435         112         763         342         245         377         117         832         368
i8 .i3          728         370         929         343         330          52         429         256         853         833
i8 .i4          119         181         824         603         479         638         579         668         963         327
i8 .i5          847         477         266          11         779         713         663         470         876         234
i8 .i6          576         129         408         301         778         512         864         882         633         252
i8 .i7          285         726         740         680         318         900         750         914         812         969
i8 .i8          203         575         260          23         359         208         991         759         141         376
i8 .i9          267         775         744         974         857         624         612          62         878         804
i8 .i10         535           2         589         165         643         521         715         792         649         206
i9 .i1          413         339         531          51         332         805         852         257          64         566
i9 .i2          204         100          82         226         362         871         471         785         500         815
i9 .i3          528         807         372         352         880         221         564         861         251          16
i9 .i4          218         652         351         808         108           5         888         814         182         540
i9 .i5          565         990         602         642          94         538         333         501         523         983
i9 .i6          627         651         399         709         449         849         632         736         356         508
i9 .i7          796         931          69          84         114         280         420         989         212         490
i9 .i8          994          71         594          88           4         625         719         570         326         976
i9 .i9          626         305         394         140         942         748         417         270         746         899
i9 .i10         366         910         859         953         874         735         317         653         697         860
i10.i1          319         645         422         656         124         834          61         230         430         457
i10.i2          621         620         955         583          67         790         711         553          42         146
i10.i3          568          59         916         156         476         601         445         926         407         273
i10.i4          299         673         185         460         930         428          78         126         704         155
i10.i5          892         684          27         519         489         938         950         925         868         733
i10.i6          162         993         463          44         485         923         526         702         167         482
i10.i7          161         134           1         569          72         619         828         600         611         381
i10.i8          597         300         924         784         468         354         933         772          53         383
i10.i9          511         506         410         966          57         263         813         462          13         555
i10.i10         446         277         734         195         959          79         276         665         598         347


**** REPORT FILE SUMMARY

 pyScript C:\projects\OptimizationModels\Sudoku\225a\myEmb.dat


EXECUTION TIME       =        0.547 SECONDS      4 MB  39.1.0 5f04cd76 WEX-WEI


USER: Eval License                                   G211206|0002CO-GEN
      Amsterdam Optimization Modeling Group,                     DCE378


**** FILE SUMMARY

Input      C:\projects\OptimizationModels\Sudoku\Untitled_5.gms
Output     C:\projects\OptimizationModels\Sudoku\Untitled_5.lst
